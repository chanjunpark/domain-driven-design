## 1장 도메인 모델 시작하기
---
### 1.4 도메인 모델 패턴
- 여기서 말하는 도메인 모델은 개념 모델로서의 도메인 모델이 아닌 객체 모델로서의 도메인 모델을 의미한다.
- 도메인 모델은 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴을 말한다. 
- 배송지 변경 가능 여부를 판단하는 기능이 Order에 있든 OrderState에 있든 중요한 점은 주문과 관련된 중요 업무 규칙을 주문 도메인 모델인 Order나 OrderState에서 구현한다는 점이다.
- 핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해야 할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영할 수 있다.
### 1.5 도메인 모델 도출
- 도메인을 모델링할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것이다. 이 과정은 요구사항에서 출발한다.
- "주문할 때 배송지 정보를 바늗시 지정해야 한다" → 필수조건일 때는 생성자에 반영 :)
- "출고를 하면 배송지 정보를 변경할 수 없다", "출고 전에 주문을 취소할 수 있다" → 요구사항에 특정 상태를 전후로 한 제약사항이 기술되어 있다면 이를 반영할 수 있어야 한다. 즉, 주문은 최소한 출고상태를 표현할 수 있어야 함.
### 1.6 엔티티와 밸류
- 엔티티의 가장 큰 특징은 식별자를 가진다는 것이다. 
- 식별자 생성 방법
    1. 특정 규칙에 따라 생성
        - 주문번호, 운송장번호, 카드번호 등
        - 흔히 사용하는 규칙은 현재 시간과 다른 값을 함께 조립하는 것
    2. UUID나 Nano ID와 같은 고유 식별자 생성기 사용
    3. 값을 직접 입력
    4. 일련번호 사용(시퀀스나 DB의 자동증가 컬럼 사용)
- 자동 증가 컬럼을 제외한 다른 방식은 식별자를 먼저 만들고 엔티티 객체를 생성할 때 식별자를 전달한다. 자동 증가 컬ㄹ럼은 DB 테이블에 데이터를 삽입해야 비로소 값을 알 수 있기 때문에 테이블에 데이터를 추가하기 전에는 식별자를 알 수 없다. 이는 엔티티 객체를 생성할 때 식별자를 전달할 수 없음을 의미한다.
- 밸류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다. 예) 받는사람(이름,핸드폰번호), 주소(주소1, 주소2, 우편번호) → @Embedded
- 밸류 타입이 꼭 두개 이상의 데이터를 가져야 하는 것은 아니다. 의미를 명확히 표현하기 위해 밸류타입을 사용하는 경우도 있다 → OrderLine
- 밸류 타입은 코드의 의미를 더 잘 이해할 수 있도록 한다. 
- 밸류타입을 불변으로 구현하는 가장 중요한 이유 : 안전한 코드를 작성할 수 있다.
- 도메인 모델에 getter/setter 무조건 추가하는 것은 좋지 않은 버릇이다. 특시 setter는 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다.
- 도메인 객체가 불완전한 상태로 사용되는 것을 막으려면 생성자를 통해 필요한 데이터를 모두 전달해야 한다. 이를 통해 생성자를 호출하는 시점에 데이터 유효성 검사도 진행할 수 있다.
- private setter : 클래스 내부에서 데이터를 변경할 목적으로 사용 → 생성자는 private setter를 포함하고, private setter에서 유효성을 검증해 결과로 Exception을 발생시킴
- setter를 구현해야할 특별한 이유가 없다면 밸류 타입은 불변으로 구현한다. 
### 1.7 도메인 용어와 유비쿼터스 언어
- 주문의 상태를 개발자가 임의로 STEP1, STEP2, STEP3 처럼 정해쓰지 말고, PAYMENT_WAITING, PREPARING, SHIPPED와 같이 도메인에서 사용하는 용어를 최대한 코드에 반영한다. 

## 2장 아키텍처 개요
---
